<!doctype html>
<html lang="en" data-color-mode="dark">
<head>
<meta charset="utf-8">
<title>Nuxt.js 速查表
 &#x26;  nuxtjs cheatsheet &#x26;  速查表</title>
<meta content="width=device-width, initial-scale=1" name="viewport">
<meta description="这是一份快速参考速查表，包含 Nuxt.js 的核心 API 参考列表和一些示例。


入门，为开发人员分享快速参考速查表。">
<meta keywords="nuxtjs,reference,Quick,Reference,cheatsheet,cheat,sheet">
<meta rel="apple-touch-icon" sizes="180x180" href="../icons/iphone-touch-icon.png">
<link rel="icon" href="../icons/favicon.ico" type="image/svg+xml">
<link href="../style/style.css" rel="stylesheet">
<link href="../style/katex.css" rel="stylesheet">
</head>
<body><nav class="header-nav"><div class="max-container"><a href="../index.html" class="logo"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" height="1em" width="1em">
  <path d="m21.66 10.44-.98 4.18c-.84 3.61-2.5 5.07-5.62 4.77-.5-.04-1.04-.13-1.62-.27l-1.68-.4c-4.17-.99-5.46-3.05-4.48-7.23l.98-4.19c.2-.85.44-1.59.74-2.2 1.17-2.42 3.16-3.07 6.5-2.28l1.67.39c4.19.98 5.47 3.05 4.49 7.23Z" fill="#c9d1d9"></path>
  <path d="M15.06 19.39c-.62.42-1.4.77-2.35 1.08l-1.58.52c-3.97 1.28-6.06.21-7.35-3.76L2.5 13.28c-1.28-3.97-.22-6.07 3.75-7.35l1.58-.52c.41-.13.8-.24 1.17-.31-.3.61-.54 1.35-.74 2.2l-.98 4.19c-.98 4.18.31 6.24 4.48 7.23l1.68.4c.58.14 1.12.23 1.62.27Zm2.43-8.88c-.06 0-.12-.01-.19-.02l-4.85-1.23a.75.75 0 0 1 .37-1.45l4.85 1.23a.748.748 0 0 1-.18 1.47Z" fill="#228e6c"></path>
  <path d="M14.56 13.89c-.06 0-.12-.01-.19-.02l-2.91-.74a.75.75 0 0 1 .37-1.45l2.91.74c.4.1.64.51.54.91-.08.34-.38.56-.72.56Z" fill="#228e6c"></path>
</svg>
<span class="title">速查表</span></a><div class="menu"><a href="javascript:void(0);" class="searchbtn" id="searchbtn"><svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" viewBox="0 0 18 18">
  <path fill="currentColor" d="M17.71,16.29 L14.31,12.9 C15.4069846,11.5024547 16.0022094,9.77665502 16,8 C16,3.581722 12.418278,0 8,0 C3.581722,0 0,3.581722 0,8 C0,12.418278 3.581722,16 8,16 C9.77665502,16.0022094 11.5024547,15.4069846 12.9,14.31 L16.29,17.71 C16.4777666,17.8993127 16.7333625,18.0057983 17,18.0057983 C17.2666375,18.0057983 17.5222334,17.8993127 17.71,17.71 C17.8993127,17.5222334 18.0057983,17.2666375 18.0057983,17 C18.0057983,16.7333625 17.8993127,16.4777666 17.71,16.29 Z M2,8 C2,4.6862915 4.6862915,2 8,2 C11.3137085,2 14,4.6862915 14,8 C14,11.3137085 11.3137085,14 8,14 C4.6862915,14 2,11.3137085 2,8 Z"></path>
</svg><span>搜索</span><span>⌘K</span></a><a href="https://www.vipzhicheng.com" class="" target="__blank"><svg viewBox="0 0 24 24" fill="currentColor" height="1em" width="1em"><path d="M12.74 2.32a1 1 0 0 0-1.48 0l-9 10A1 1 0 0 0 3 14h2v7a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-7h2a1 1 0 0 0 1-1 1 1 0 0 0-.26-.68z"></path></svg><span>首页</span></a><button id="darkMode" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="light" height="1em" width="1em">
  <path d="M6.995 12c0 2.761 2.246 5.007 5.007 5.007s5.007-2.246 5.007-5.007-2.246-5.007-5.007-5.007S6.995 9.239 6.995 12zM11 19h2v3h-2zm0-17h2v3h-2zm-9 9h3v2H2zm17 0h3v2h-3zM5.637 19.778l-1.414-1.414 2.121-2.121 1.414 1.414zM16.242 6.344l2.122-2.122 1.414 1.414-2.122 2.122zM6.344 7.759 4.223 5.637l1.415-1.414 2.12 2.122zm13.434 10.605-1.414 1.414-2.122-2.122 1.414-1.414z"></path>
</svg>
<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" class="dark" height="1em" width="1em">
  <path d="M12 11.807A9.002 9.002 0 0 1 10.049 2a9.942 9.942 0 0 0-5.12 2.735c-3.905 3.905-3.905 10.237 0 14.142 3.906 3.906 10.237 3.905 14.143 0a9.946 9.946 0 0 0 2.735-5.119A9.003 9.003 0 0 1 12 11.807z"></path>
</svg>
</button><script src="../js/dark.js?v=1.8.1"></script></div></div></nav><div class="wrap h1body-exist max-container"><header class="wrap-header h1wrap"><h1 id="nuxtjs-速查表"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" fill="currentColor" height="1em" width="1em">
  <path d="M107.946667 838.4l57.173333 23.893333v-385.28l-103.68 250.026667c-17.493333 43.52 3.413333 93.44 46.506667 111.36z m832-157.866667L728.32 169.813333a85.888 85.888 0 0 0-77.226667-52.48c-11.093333 0-22.613333 1.706667-33.706666 6.4L302.933333 253.866667a85.290667 85.290667 0 0 0-46.08 110.933333l211.626667 510.72a85.248 85.248 0 0 0 110.933333 46.08l314.026667-130.133333a85.077333 85.077333 0 0 0 46.506667-110.933334zM336.213333 373.333333c-23.466667 0-42.666667-19.2-42.666666-42.666666s19.2-42.666667 42.666666-42.666667 42.666667 19.2 42.666667 42.666667-19.2 42.666667-42.666667 42.666666z m-85.333333 469.333334c0 46.933333 38.4 85.333333 85.333333 85.333333h61.866667l-147.2-355.84v270.506667z"></path>
</svg><a aria-hidden="true" tabindex="-1" href="#nuxtjs-速查表"><span class="icon icon-link"></span></a>Nuxt.js 速查表</h1><div class="wrap-body">
<p><a href="https://www.npmjs.com/package/nuxt"><img src="https://img.shields.io/npm/v/nuxt/latest.svg?style=flat" alt="NPM version"></a>
<a href="https://www.npmjs.com/package/nuxt"><img src="https://img.shields.io/npm/dm/nuxt.svg?style=flat" alt="Downloads"></a>
<a href="https://github.com/nuxt/nuxt/network/dependents"><img src="https://badgen.net/github/dependents-repo/nuxt/nuxt" alt="Repo Dependents"></a>
<a href="https://github.com/nuxt/nuxt"><img src="https://badgen.net/badge/icon/Github?icon=github&#x26;label" alt="Github repo"></a></p>
<p style="padding-top: 12px;">这是一份快速参考速查表，包含 <a href="https://nuxt.com/">Nuxt.js</a> 的核心 API 参考列表和一些示例。</p>
<!--rehype:style=padding-top: 12px;-->
</div></header><div class="menu-tocs"><div class="menu-btn"><svg aria-hidden="true" fill="currentColor" height="1em" width="1em" viewBox="0 0 16 16" version="1.1" data-view-component="true">
  <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
</svg></div><div class="menu-modal"><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#入门">入门</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#创建项目">创建项目</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#添加首页">添加首页</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#usefetch--useasyncdata-通用数据获取">useFetch / useAsyncData (通用数据获取)</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#静态站点生成-ssg">静态站点生成 (SSG)</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#增量静态再生-isr--stale-while-revalidate-swr">增量静态再生 (ISR) / Stale-While-Revalidate (SWR)</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#客户端数据获取-onmounted">客户端数据获取 (onMounted)</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#静态文件服务">静态文件服务</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#支持的浏览器和功能">支持的浏览器和功能</a><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#内置-css-支持">内置 CSS 支持</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#添加全局样式表">添加全局样式表</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#从-node_modules-导入样式">从 node_modules 导入样式</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#添加组件级-css-scoped-css--css-modules">添加组件级 CSS (Scoped CSS &#x26; CSS Modules)</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#sassscsslessstylus-支持">Sass/SCSS/Less/Stylus 支持</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#自定义预处理器选项">自定义预处理器选项</a><a aria-hidden="true" class="leve4 tocs-link" data-num="4" href="#sass-变量共享-示例">Sass 变量共享 (示例)</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#css-in-js-较少使用">CSS-in-JS (较少使用)</a><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#layouts">Layouts</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#基础示例-默认布局">基础示例 (默认布局)</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#多个布局-命名布局">多个布局 (命名布局)</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#在页面中指定布局">在页面中指定布局</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#禁用布局">禁用布局</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#数据请求-在布局中">数据请求 (在布局中)</a><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#图片优化-nuxtimage">图片优化 (@nuxt/image)</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#本地图片-public-目录">本地图片 (public/ 目录)</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#远程图片">远程图片</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#priority-预加载">Priority (预加载)</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#nuxtpicture-组件">&#x3C;NuxtPicture> 组件</a><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#优化字体">优化字体</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#手动引入-本地或-cdn">手动引入 (本地或 CDN)</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#使用-nuxtjsgoogle-fonts-模块">使用 @nuxtjs/google-fonts 模块</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#使用-tailwind-css">使用 Tailwind CSS</a><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#优化-scripts-usehead">优化 Scripts (useHead)</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#页面特定脚本">页面特定脚本</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#应用全局脚本">应用全局脚本</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#内联脚本">内联脚本</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#script-事件-onload-onerror">Script 事件 (onload, onerror)</a><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#eslint">ESLint</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#集成-eslint">集成 ESLint</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#自定义配置">自定义配置</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#对自定义目录和文件进行检查">对自定义目录和文件进行检查</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#禁用规则">禁用规则</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#prettier-集成">Prettier 集成</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#lint-staged">lint-staged</a><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#typescript">TypeScript</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#创建项目-自带-ts">创建项目 (自带 TS)</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#类型检查">类型检查</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#数据获取类型">数据获取类型</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#api-路由-server-routes">API 路由 (Server Routes)</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#自定义-appvue">自定义 app.vue</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#类型化-nuxtconfigts">类型化 nuxt.config.ts</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#忽略-typescript-错误">忽略 TypeScript 错误</a><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#环境变量">环境变量</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#加载环境变量">加载环境变量</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#使用环境变量-runtime-config">使用环境变量 (Runtime Config)</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#变量扩展和转义">变量扩展和转义</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#优先级">优先级</a><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#路由">路由</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#基础路由">基础路由</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#动态路由">动态路由</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#捕获所有路由-catch-all">捕获所有路由 (Catch-all)</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#可选捕获所有路由-optional-catch-all">可选捕获所有路由 (Optional Catch-all)</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#页面之间的链接-nuxtlink">页面之间的链接 (&#x3C;NuxtLink>)</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#编程式导航-userouter">编程式导航 (useRouter)</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#路由元信息-definepagemeta">路由元信息 (definePageMeta)</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#路由中间件">路由中间件</a><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#另见">另见</a></div></div><div class="h1wrap-body"><div class="wrap h2body-exist"><div class="wrap-header h2wrap"><h2 id="入门"><a aria-hidden="true" tabindex="-1" href="#入门"><span class="icon icon-link"></span></a>入门</h2><div class="wrap-body">
</div></div><div class="h2wrap-body"><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="创建项目"><a aria-hidden="true" tabindex="-1" href="#创建项目"><span class="icon icon-link"></span></a>创建项目</h3><div class="wrap-body">
<p>使用 <code>nuxi</code>（Nuxt CLI）创建新项目：</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line">npx nuxi init <span class="token operator">&#x3C;</span>project-name<span class="token operator">></span>
</span><span class="code-line"><span class="token comment"># or</span>
</span><span class="code-line"><span class="token function">yarn</span> dlx nuxi init <span class="token operator">&#x3C;</span>project-name<span class="token operator">></span>
</span><span class="code-line"><span class="token comment"># or</span>
</span><span class="code-line"><span class="token function">pnpm</span> dlx nuxi init <span class="token operator">&#x3C;</span>project-name<span class="token operator">></span>
</span></code></pre>
<p>进入项目目录并安装依赖：</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> <span class="token operator">&#x3C;</span>project-name<span class="token operator">></span>
</span><span class="code-line"><span class="token function">npm</span> <span class="token function">install</span>
</span><span class="code-line"><span class="token comment"># or</span>
</span><span class="code-line"><span class="token function">yarn</span> <span class="token function">install</span>
</span><span class="code-line"><span class="token comment"># or</span>
</span><span class="code-line"><span class="token function">pnpm</span> <span class="token function">install</span>
</span></code></pre>
<p>运行 <code>npm run dev</code> 或 <code>yarn dev</code> 或 <code>pnpm dev</code> 以在 <a href="http://localhost:3000">http://localhost:3000</a> 上启动开发服务器。</p>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="添加首页"><a aria-hidden="true" tabindex="-1" href="#添加首页"><span class="icon icon-link"></span></a>添加首页</h3><div class="wrap-body">
<p>使用以下内容创建或填充 <code>pages/index.vue</code>：</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span>Welcome to Nuxt.js!<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">// Nuxt 3 中，&#x3C;script setup> 是推荐的写法</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">// 无需显式导出组件</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
</span></code></pre>
<p>Nuxt.js 也是围绕页面的概念构建的。 页面是 <code>pages</code> 目录中的 <code>.vue</code> 文件。 Nuxt 会自动根据文件结构生成路由。</p>
</div></div></div><div class="wrap h3body-not-exist row-span-2"><div class="wrap-header h3wrap"><h3 id="usefetch--useasyncdata-通用数据获取"><a aria-hidden="true" tabindex="-1" href="#usefetch--useasyncdata-通用数据获取"><span class="icon icon-link"></span></a>useFetch / useAsyncData (通用数据获取)</h3><div class="wrap-body">
<!--rehype:wrap-class=row-span-2-->
<p>Nuxt 3 推荐使用 <code>useFetch</code> 或 <code>useAsyncData</code> 进行数据获取，它们在服务器端和客户端都能工作，并处理 SSR 数据传递。</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pending<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Loading...<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>pre</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>error<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Error: {{ error.message }}<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>pre</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>pre</span> <span class="token attr-name">v-else</span><span class="token punctuation">></span></span>{{ data }}<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>pre</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">// 'useFetch' 是 'useAsyncData' 加上 fetch 的快捷方式</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> pending<span class="token punctuation">,</span> error<span class="token punctuation">,</span> refresh <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">useFetch</span><span class="token punctuation">(</span><span class="token string">'/api/data'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token comment">// 可以提供选项，如 pick, transform, server, lazy 等</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token comment">// pick: ['id', 'title'] // 只选择需要的字段</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">// 或者使用 useAsyncData + $fetch (Nuxt 内置的 fetch 封装)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">/*
</span></span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">const { data, pending, error, refresh } = await useAsyncData(
</span></span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">  'myData', // 唯一的 key
</span></span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">  () => $fetch('/api/data')
</span></span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">)
</span></span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">*/</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">// 如果需要在 setup 外或非 setup 脚本中使用，移除 await</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">// const { data, pending, error } = useFetch('/api/data');</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
</span></code></pre>
<ul>
<li><code>useFetch</code> 和 <code>useAsyncData</code> 在服务器端执行以进行 SSR。获取的数据会被序列化并传递给客户端。</li>
<li>在客户端导航时，它们会在客户端执行以获取新数据。</li>
<li><code>pending</code>: 请求是否进行中。</li>
<li><code>error</code>: 请求是否出错。</li>
<li><code>data</code>: 返回的数据 (ref)。</li>
<li><code>refresh</code>: 手动重新获取数据的函数。</li>
<li><code>lazy: true</code>: 数据在客户端导航后加载，显示加载状态，不阻塞导航。</li>
<li><code>server: false</code>: 只在客户端获取数据。</li>
</ul>
</div></div></div><div class="wrap h3body-not-exist row-span-2"><div class="wrap-header h3wrap"><h3 id="静态站点生成-ssg"><a aria-hidden="true" tabindex="-1" href="#静态站点生成-ssg"><span class="icon icon-link"></span></a>静态站点生成 (SSG)</h3><div class="wrap-body">
<!--rehype:wrap-class=row-span-2-->
<p>Nuxt 3 通过 Nitro 服务器引擎支持强大的 SSG 功能。</p>
<ol>
<li><strong>数据获取</strong>: 仍然使用 <code>useFetch</code> 或 <code>useAsyncData</code> 获取页面数据。</li>
<li><strong>生成</strong>: 运行 <code>npx nuxi generate</code> 命令。</li>
<li><strong>预渲染</strong>:
<ul>
<li>Nuxt 会自动爬取项目中的内部链接（<code>&#x3C;NuxtLink></code>）并预渲染这些页面。</li>
<li>对于动态路由（如 <code>pages/posts/[id].vue</code>），如果 Nuxt 无法自动发现所有可能的路径，你需要在 <code>nuxt.config.ts</code> 中配置预渲染路由：</li>
</ul>
</li>
</ol>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// nuxt.config.ts</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  nitro<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    prerender<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token comment">// crawlLinks: true, // 默认开启，爬取链接</span>
</span><span class="code-line">      routes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token string">'/about'</span><span class="token punctuation">,</span> <span class="token string">'/posts/1'</span><span class="token punctuation">,</span> <span class="token string">'/posts/2'</span><span class="token punctuation">]</span> <span class="token comment">// 手动指定需要预渲染的路由</span>
</span><span class="code-line">      <span class="token comment">// 也可以异步获取路由列表</span>
</span><span class="code-line">      <span class="token comment">/*
</span></span><span class="code-line"><span class="token comment">      async routes() {
</span></span><span class="code-line"><span class="token comment">        const posts = await $fetch('/api/posts'); // 假设有获取所有 post ID 的 API
</span></span><span class="code-line"><span class="token comment">        return posts.map(post => `/posts/${post.id}`);
</span></span><span class="code-line"><span class="token comment">      }
</span></span><span class="code-line"><span class="token comment">      */</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre>
<ul>
<li>SSG 适用于内容不经常变动、需要极致性能和 SEO 的场景。</li>
<li>生成的结果是纯静态文件（HTML, JS, CSS），可以部署在任何静态托管服务上。</li>
</ul>
</div></div></div><div class="wrap h3body-not-exist row-span-2"><div class="wrap-header h3wrap"><h3 id="增量静态再生-isr--stale-while-revalidate-swr"><a aria-hidden="true" tabindex="-1" href="#增量静态再生-isr--stale-while-revalidate-swr"><span class="icon icon-link"></span></a>增量静态再生 (ISR) / Stale-While-Revalidate (SWR)</h3><div class="wrap-body">
<!--rehype:wrap-class=row-span-2-->
<p>Nuxt 3 (Nitro) 允许在页面或 API 级别配置缓存策略，实现类似 ISR/SWR 的效果。</p>
<p>在 <code>nuxt.config.ts</code> 中使用 <code>routeRules</code> 配置：</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// nuxt.config.ts</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  routeRules<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// 对 /blog/** 下的所有页面应用 ISR，缓存 60 秒</span>
</span><span class="code-line">    <span class="token string-property property">'/blog/**'</span><span class="token operator">:</span> <span class="token punctuation">{</span> isr<span class="token operator">:</span> <span class="token number">60</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 单位：秒</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// 对特定页面应用 SWR，缓存 1 小时，后台更新</span>
</span><span class="code-line">    <span class="token string-property property">'/products/special'</span><span class="token operator">:</span> <span class="token punctuation">{</span> swr<span class="token operator">:</span> <span class="token number">3600</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// 对 API 路由应用缓存</span>
</span><span class="code-line">    <span class="token string-property property">'/api/posts'</span><span class="token operator">:</span> <span class="token punctuation">{</span> swr<span class="token operator">:</span> <span class="token number">600</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// 禁用 SSR，仅 CSR</span>
</span><span class="code-line">    <span class="token string-property property">'/admin/**'</span><span class="token operator">:</span> <span class="token punctuation">{</span> ssr<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// 重定向</span>
</span><span class="code-line">    <span class="token string-property property">'/old-page'</span><span class="token operator">:</span> <span class="token punctuation">{</span> redirect<span class="token operator">:</span> <span class="token string">'/new-page'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// 添加 headers</span>
</span><span class="code-line">    <span class="token string-property property">'/assets/**'</span><span class="token operator">:</span> <span class="token punctuation">{</span> headers<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">'cache-control'</span><span class="token operator">:</span> <span class="token string">'s-maxage=31536000'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre>
<ul>
<li><code>isr: &#x3C;seconds></code>: 在指定时间内提供缓存，过期后下一个请求会触发后台重新生成。</li>
<li><code>swr: &#x3C;seconds></code>: 在指定时间内提供缓存，过期后下一个请求<strong>立即</strong>返回旧缓存，同时触发后台重新生成。</li>
<li>这需要在支持 Node.js 或 Serverless 环境的托管平台（如 Vercel, Netlify, Cloudflare Workers）上部署 <code>nuxi build</code> 的输出 (<code>.output</code> 目录)。</li>
</ul>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="客户端数据获取-onmounted"><a aria-hidden="true" tabindex="-1" href="#客户端数据获取-onmounted"><span class="icon icon-link"></span></a>客户端数据获取 (onMounted)</h3><div class="wrap-body">
<p>如果数据仅在客户端需要（例如，用户特定数据且不需要 SEO），可以在 <code>onMounted</code> 钩子中使用原生 <code>fetch</code> 或 <code>$fetch</code>。</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>loading<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Loading profile...<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>profile<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h1</span><span class="token punctuation">></span></span>{{ profile.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h1</span><span class="token punctuation">></span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span>{{ profile.bio }}<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span> <span class="token attr-name">v-else</span><span class="token punctuation">></span></span>No profile data<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vue'</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword">const</span> profile <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword">const</span> loading <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">    <span class="token comment">// $fetch 是 Nuxt 提供的 fetch 封装，更好用</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">    profile<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">$fetch</span><span class="token punctuation">(</span><span class="token string">'/api/profile-data'</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token string">'Failed to load profile data:'</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token punctuation">}</span> <span class="token keyword control-flow">finally</span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">    loading<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">=</span> <span class="token boolean">false</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token punctuation">}</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
</span></code></pre>
<p><em>注意：</em> 这种方式获取的数据不会用于 SSR，可能影响首屏加载内容和 SEO。通常推荐使用 <code>useFetch</code> 或 <code>useAsyncData</code> 并设置 <code>server: false</code> 或 <code>lazy: true</code> 来实现类似效果，同时利用 Nuxt 的状态管理和错误处理。</p>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="静态文件服务"><a aria-hidden="true" tabindex="-1" href="#静态文件服务"><span class="icon icon-link"></span></a>静态文件服务</h3><div class="wrap-body">
<p>Nuxt 在项目根目录的 <code>public/</code> 文件夹下提供静态文件。代码可以从根 URL (<code>/</code>) 引用这些文件。</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token comment">&#x3C;!-- public/avatar.png --></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/avatar.png<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>User Avatar<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>64<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>64<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">&#x3C;!-- 使用 NuxtImg (如果安装了 @nuxt/image) --></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>NuxtImg</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/avatar.png<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>User Avatar<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>64<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>64<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">// 如果使用 @nuxt/image</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">// import { NuxtImg } from '#components' // 通常 Nuxt 会自动导入</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="支持的浏览器和功能"><a aria-hidden="true" tabindex="-1" href="#支持的浏览器和功能"><span class="icon icon-link"></span></a>支持的浏览器和功能</h3><div class="wrap-body">
<p>Nuxt (基于 Vite) 默认目标是支持 <a href="https://caniuse.com/es6-module">原生 ES 模块</a>、<a href="https://caniuse.com/es6-module-dynamic-import">原生 ESM 动态导入</a> 和 <a href="https://caniuse.com/import-meta"><code>import.meta</code></a> 的现代浏览器。</p>
<ul class="cols-3">
<li>Chrome >=88</li>
<li>Firefox >=78</li>
<li>Safari >=14</li>
<li>Edge >=88</li>
</ul>
<!--rehype:className=cols-3-->
<p>可以通过 <code>nuxt.config.ts</code> 中的 <code>vite.build.target</code> 或 <code>.browserslistrc</code> 文件配置目标浏览器（Vite 会使用 <code>browserslist</code> 配置）。</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// nuxt.config.ts</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  vite<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    build<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">      target<span class="token operator">:</span> <span class="token string">'es2015'</span> <span class="token comment">// 或 'modules' (默认)</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre>
</div></div></div></div></div><div class="wrap h2body-exist"><div class="wrap-header h2wrap"><h2 id="内置-css-支持"><a aria-hidden="true" tabindex="-1" href="#内置-css-支持"><span class="icon icon-link"></span></a>内置 CSS 支持</h2><div class="wrap-body">
</div></div><div class="h2wrap-body"><div class="wrap h3body-not-exist row-span-2"><div class="wrap-header h3wrap"><h3 id="添加全局样式表"><a aria-hidden="true" tabindex="-1" href="#添加全局样式表"><span class="icon icon-link"></span></a>添加全局样式表</h3><div class="wrap-body">
<!--rehype:wrap-class=row-span-2-->
<p>在 <code>nuxt.config.ts</code> 的 <code>css</code> 数组中引入全局 CSS 文件。通常放在 <code>assets/css/</code> 目录下。</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// nuxt.config.ts</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  css<span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">    <span class="token string">'~/assets/css/main.css'</span><span class="token punctuation">,</span> <span class="token comment">// 使用 ~ 代替 @ 指向 srcDir (通常是项目根目录)</span>
</span><span class="code-line">  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre>
<p>例如，<code>assets/css/main.css</code>：</p>
<pre class="language-css"><code class="language-css code-highlight"><span class="code-line"><span class="token selector">body</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token property">font-family</span><span class="token punctuation">:</span> system-ui<span class="token punctuation">,</span> -apple-system<span class="token punctuation">,</span> BlinkMacSystemFont<span class="token punctuation">,</span> <span class="token string">'Segoe UI'</span><span class="token punctuation">,</span> Roboto<span class="token punctuation">,</span> Oxygen<span class="token punctuation">,</span> Ubuntu<span class="token punctuation">,</span> Cantarell<span class="token punctuation">,</span> <span class="token string">'Open Sans'</span><span class="token punctuation">,</span> <span class="token string">'Helvetica Neue'</span><span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span> auto<span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>这些样式会被打包并全局应用。</p>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="从-node_modules-导入样式"><a aria-hidden="true" tabindex="-1" href="#从-node_modules-导入样式"><span class="icon icon-link"></span></a>从 node_modules 导入样式</h3><div class="wrap-body">
<p>同样在 <code>nuxt.config.ts</code> 的 <code>css</code> 数组中引入：</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// nuxt.config.ts</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  css<span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">    <span class="token string">'bootstrap/dist/css/bootstrap.css'</span><span class="token punctuation">,</span> <span class="token comment">// 直接从 node_modules 引入</span>
</span><span class="code-line">    <span class="token string">'~/assets/css/main.css'</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist row-span-2"><div class="wrap-header h3wrap"><h3 id="添加组件级-css-scoped-css--css-modules"><a aria-hidden="true" tabindex="-1" href="#添加组件级-css-scoped-css--css-modules"><span class="icon icon-link"></span></a>添加组件级 CSS (Scoped CSS &#x26; CSS Modules)</h3><div class="wrap-body">
<!--rehype:wrap-class=row-span-2-->
<p>Vue 组件天然支持 Scoped CSS 和 CSS Modules。</p>
<p><strong>Scoped CSS:</strong> (最常用)</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button error<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Destroy<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css"><span class="token comment">/* 样式只作用于当前组件 */</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css"><span class="token selector"><span class="token class">.button</span></span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css">  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">8</span><span class="token unit">px</span> <span class="token number">16</span><span class="token unit">px</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css"><span class="token punctuation">}</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css"><span class="token selector"><span class="token class">.error</span></span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css">  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token color">white</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css">  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token color">red</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css"><span class="token punctuation">}</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>style</span><span class="token punctuation">></span></span>
</span></code></pre>
<p><strong>CSS Modules:</strong></p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token comment">&#x3C;!-- 使用 $style 对象绑定 class --></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$style.error<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Destroy<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>style</span> <span class="token attr-name">module</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css"><span class="token comment">/* 生成带 hash 的唯一类名, 如 .Button_error_hash */</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css"><span class="token selector"><span class="token class">.error</span></span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css">  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token color">white</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css">  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token color">blue</span><span class="token punctuation">;</span> <span class="token comment">/* 改为蓝色以区分 */</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css"><span class="token punctuation">}</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>style</span><span class="token punctuation">></span></span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="sassscsslessstylus-支持"><a aria-hidden="true" tabindex="-1" href="#sassscsslessstylus-支持"><span class="icon icon-link"></span></a>Sass/SCSS/Less/Stylus 支持</h3><div class="wrap-body">
<p>Nuxt (通过 Vite) 内置了对 CSS 预处理器的支持。只需安装相应的预处理器即可。</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line"><span class="token comment"># 安装 Sass</span>
</span><span class="code-line"><span class="token function">npm</span> <span class="token function">install</span> --save-dev sass
</span><span class="code-line"><span class="token comment"># or yarn add --dev sass</span>
</span><span class="code-line"><span class="token comment"># or pnpm add -D sass</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 安装 Less</span>
</span><span class="code-line"><span class="token function">npm</span> <span class="token function">install</span> --save-dev <span class="token function">less</span>
</span><span class="code-line"><span class="token comment"># or yarn add --dev less</span>
</span><span class="code-line"><span class="token comment"># or pnpm add -D less</span>
</span></code></pre>
<p>安装后，可以直接在 <code>.vue</code> 文件或 <code>assets</code> 目录中使用 <code>.scss</code>, <code>.sass</code>, <code>.less</code>, <code>.styl</code> 文件。</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css">$<span class="token property">primary-color</span><span class="token punctuation">:</span> <span class="token hexcode color">#41B883</span><span class="token punctuation">;</span> <span class="token selector">// Vue Green
</span></span></span></span><span class="code-line"><span class="token style"><span class="token language-css"><span class="token selector">
</span></span></span></span><span class="code-line"><span class="token style"><span class="token language-css"><span class="token selector"><span class="token class">.button</span></span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css">  <span class="token property">background-color</span><span class="token punctuation">:</span> $primary-color<span class="token punctuation">;</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css">  <span class="token selector">&#x26;<span class="token pseudo-class">:hover</span></span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css">    <span class="token property">opacity</span><span class="token punctuation">:</span> <span class="token number">0.8</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css">  <span class="token punctuation">}</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css"><span class="token punctuation">}</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>style</span><span class="token punctuation">></span></span>
</span></code></pre>
</div></div></div><div class="wrap h3body-exist col-span-2"><div class="wrap-header h3wrap"><h3 id="自定义预处理器选项"><a aria-hidden="true" tabindex="-1" href="#自定义预处理器选项"><span class="icon icon-link"></span></a>自定义预处理器选项</h3><div class="wrap-body">
<!--rehype:wrap-class=col-span-2-->
<p>在 <code>nuxt.config.ts</code> 中通过 <code>vite.css.preprocessorOptions</code> 配置。</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// nuxt.config.ts</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  vite<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    css<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">      preprocessorOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">        scss<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">          <span class="token comment">// 自动导入全局变量/mixins</span>
</span><span class="code-line">          additionalData<span class="token operator">:</span> <span class="token string">'@import "~/assets/scss/_variables.scss"; @import "~/assets/scss/_mixins.scss";'</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">        less<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">          <span class="token comment">// Less 配置</span>
</span><span class="code-line">          modifyVars<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">            <span class="token string-property property">'primary-color'</span><span class="token operator">:</span> <span class="token string">'#1DA57A'</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">          javascriptEnabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre>
<h4 id="sass-变量共享-示例"><a aria-hidden="true" tabindex="-1" href="#sass-变量共享-示例"><span class="icon icon-link"></span></a>Sass 变量共享 (示例)</h4>
<pre class="language-scss"><code class="language-scss code-highlight"><span class="code-line"><span class="token comment">/* assets/scss/_variables.scss */</span>
</span><span class="code-line"><span class="token property"><span class="token variable">$primary-color</span></span><span class="token punctuation">:</span> #3498db<span class="token punctuation">;</span>
</span><span class="code-line"><span class="token property"><span class="token variable">$secondary-color</span></span><span class="token punctuation">:</span> #f1c40f<span class="token punctuation">;</span>
</span></code></pre>
<p>然后在 <code>nuxt.config.ts</code> 中配置 <code>additionalData</code> 如上。之后就可以在任何 <code>.vue</code> 的 <code>&#x3C;style lang="scss"></code> 中直接使用 <code>$primary-color</code>。</p>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="css-in-js-较少使用"><a aria-hidden="true" tabindex="-1" href="#css-in-js-较少使用"><span class="icon icon-link"></span></a>CSS-in-JS (较少使用)</h3><div class="wrap-body">
<p>Vue 生态更倾向于使用 <code>&#x3C;style scoped></code> 或 CSS Modules。如果需要 CSS-in-JS，可以选择社区库如 <code>emotion</code> 或 <code>styled-components-vue</code>，并自行配置。</p>
</div></div></div></div></div><div class="wrap h2body-exist"><div class="wrap-header h2wrap"><h2 id="layouts"><a aria-hidden="true" tabindex="-1" href="#layouts"><span class="icon icon-link"></span></a>Layouts</h2><div class="wrap-body">
</div></div><div class="h2wrap-body"><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="基础示例-默认布局"><a aria-hidden="true" tabindex="-1" href="#基础示例-默认布局"><span class="icon icon-link"></span></a>基础示例 (默认布局)</h3><div class="wrap-body">
<p>创建 <code>layouts/default.vue</code> 文件。这个布局会自动应用到所有未使用其他布局的页面。</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line">// layouts/default.vue
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>header</span><span class="token punctuation">></span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>nav</span><span class="token punctuation">></span></span>
</span><span class="code-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>NuxtLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>NuxtLink</span><span class="token punctuation">></span></span> |
</span><span class="code-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>NuxtLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/about<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>About<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>NuxtLink</span><span class="token punctuation">></span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>nav</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>header</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>main</span><span class="token punctuation">></span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>slot</span> <span class="token punctuation">/></span></span> <span class="token comment">&#x3C;!-- 页面内容会渲染在这里 --></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>main</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>footer</span><span class="token punctuation">></span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span>© 2023 My Nuxt App<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>footer</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="多个布局-命名布局"><a aria-hidden="true" tabindex="-1" href="#多个布局-命名布局"><span class="icon icon-link"></span></a>多个布局 (命名布局)</h3><div class="wrap-body">
<p>创建其他 <code>.vue</code> 文件在 <code>layouts/</code> 目录下，例如 <code>layouts/admin.vue</code>。</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line">// layouts/admin.vue
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>admin-layout<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>aside</span><span class="token punctuation">></span></span>Admin Sidebar<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>aside</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>main</span><span class="token punctuation">></span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>slot</span> <span class="token punctuation">/></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>main</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="在页面中指定布局"><a aria-hidden="true" tabindex="-1" href="#在页面中指定布局"><span class="icon icon-link"></span></a>在页面中指定布局</h3><div class="wrap-body">
<p>在页面的 <code>&#x3C;script setup></code> 中使用 <code>definePageMeta</code>：</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line">// pages/admin/dashboard.vue
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span>Admin Dashboard Content<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token function">definePageMeta</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token literal-property property">layout</span><span class="token operator">:</span> <span class="token string">'admin'</span> <span class="token comment">// 指定使用 admin.vue 布局</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
</span></code></pre>
<p>或者直接在页面模板中使用 <code>&#x3C;NuxtLayout name="admin"></code>:</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line">// pages/admin/settings.vue
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>NuxtLayout</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>admin<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span>Admin Settings Content<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token comment">&#x3C;!-- 也可以在这里添加布局特定的内容 --></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>NuxtLayout</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span>
</span></code></pre>
<p><em>(注: 使用 <code>definePageMeta</code> 更常见和推荐)</em></p>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="禁用布局"><a aria-hidden="true" tabindex="-1" href="#禁用布局"><span class="icon icon-link"></span></a>禁用布局</h3><div class="wrap-body">
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line">// pages/login.vue - 不需要导航和页脚的页面
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span>Login Form<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token function">definePageMeta</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token literal-property property">layout</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// 禁用所有布局</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="数据请求-在布局中"><a aria-hidden="true" tabindex="-1" href="#数据请求-在布局中"><span class="icon icon-link"></span></a>数据请求 (在布局中)</h3><div class="wrap-body">
<p>可以在布局组件中获取共享数据。</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line">// layouts/default.vue
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>header</span><span class="token punctuation">></span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>nav</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!pending &#x26;&#x26; navigationData<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
</span><span class="code-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>NuxtLink</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>link in navigationData.links<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>link.path<span class="token punctuation">"</span></span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>link.path<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
</span><span class="code-line">          {{ link.name }}
</span><span class="code-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>NuxtLink</span><span class="token punctuation">></span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>nav</span><span class="token punctuation">></span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span> <span class="token attr-name">v-else</span><span class="token punctuation">></span></span>Loading navigation...<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>header</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>main</span><span class="token punctuation">></span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>slot</span> <span class="token punctuation">/></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>main</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>footer</span><span class="token punctuation">></span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>footer</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">// 获取在所有页面共享的导航数据</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span> navigationData<span class="token punctuation">,</span> pending <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">useFetch</span><span class="token punctuation">(</span><span class="token string">'/api/navigation'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">lazy</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
</span></code></pre>
<p><em>注意：</em> 在布局中使用 <code>await</code> 会阻塞所有使用该布局的页面的渲染，直到数据获取完成。通常建议使用 <code>lazy: true</code> 或将数据获取移到 Pinia/状态管理中。</p>
</div></div></div></div></div><div class="wrap h2body-exist"><div class="wrap-header h2wrap"><h2 id="图片优化-nuxtimage"><a aria-hidden="true" tabindex="-1" href="#图片优化-nuxtimage"><span class="icon icon-link"></span></a>图片优化 (@nuxt/image)</h2><div class="wrap-body">
<p>需要先安装模块: <code>npm install -D @nuxt/image</code> 或 <code>yarn add -D @nuxt/image</code> 或 <code>pnpm add -D @nuxt/image</code>，然后在 <code>nuxt.config.ts</code> 中添加 <code>'@nuxt/image'</code> 到 <code>modules</code> 数组。</p>
</div></div><div class="h2wrap-body"><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="本地图片-public-目录"><a aria-hidden="true" tabindex="-1" href="#本地图片-public-目录"><span class="icon icon-link"></span></a>本地图片 (public/ 目录)</h3><div class="wrap-body">
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h1</span><span class="token punctuation">></span></span>My Homepage<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h1</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>NuxtImg</span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/me.png<span class="token punctuation">"</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Picture of the author<span class="token punctuation">"</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">format</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>webp<span class="token punctuation">"</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">quality</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>80<span class="token punctuation">"</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/placeholder.svg<span class="token punctuation">"</span></span> <span class="token attr-name">&#x3C;!--</span> <span class="token attr-name">可选的占位符</span> <span class="token attr-name">--</span><span class="token punctuation">></span></span>
</span><span class="code-line">  />
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span>Welcome!<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span>
</span></code></pre>
<p><code>@nuxt/image</code> 会自动优化图片，转换格式 (如 webp), 调整大小等。</p>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="远程图片"><a aria-hidden="true" tabindex="-1" href="#远程图片"><span class="icon icon-link"></span></a>远程图片</h3><div class="wrap-body">
<p>需要在 <code>nuxt.config.ts</code> 中配置允许的域名。</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// nuxt.config.ts</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  modules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@nuxt/image'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">  image<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    domains<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'images.unsplash.com'</span><span class="token punctuation">,</span> <span class="token string">'cdn.example.com'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token comment">// 可以为特定域名设置别名</span>
</span><span class="code-line">    alias<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">      unsplash<span class="token operator">:</span> <span class="token string">'https://images.unsplash.com'</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>NuxtImg</span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://images.unsplash.com/photo-123<span class="token punctuation">"</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Remote image<span class="token punctuation">"</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>600<span class="token punctuation">"</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>400<span class="token punctuation">"</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">provider</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ipx<span class="token punctuation">"</span></span> <span class="token attr-name">&#x3C;!--</span> <span class="token attr-name">Nuxt</span> <span class="token attr-name">内置的优化器，或配置其他如</span> <span class="token attr-name">Cloudinary,</span> <span class="token attr-name">Vercel</span> <span class="token attr-name">等</span> <span class="token attr-name">--</span><span class="token punctuation">></span></span>
</span><span class="code-line">  />
</span><span class="code-line">  <span class="token comment">&#x3C;!-- 使用别名 --></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>NuxtImg</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/your-image-id<span class="token punctuation">"</span></span> <span class="token attr-name">provider</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>unsplash<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>300<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>200<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="priority-预加载"><a aria-hidden="true" tabindex="-1" href="#priority-预加载"><span class="icon icon-link"></span></a>Priority (预加载)</h3><div class="wrap-body">
<p>使用 <code>preload</code> 属性来提示浏览器优先加载关键图片 (如 LCP 元素)。</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>NuxtImg</span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/hero-banner.jpg<span class="token punctuation">"</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Hero Banner<span class="token punctuation">"</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200<span class="token punctuation">"</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>600<span class="token punctuation">"</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">preload</span>
</span></span><span class="code-line"><span class="token tag">  <span class="token punctuation">/></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="nuxtpicture-组件"><a aria-hidden="true" tabindex="-1" href="#nuxtpicture-组件"><span class="icon icon-link"></span></a><code>&#x3C;NuxtPicture></code> 组件</h3><div class="wrap-body">
<p>用于艺术指导，根据不同屏幕尺寸提供不同图片源。</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>NuxtPicture</span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/image-large.png<span class="token punctuation">"</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">:imgAttrs</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{alt: 'My descriptive alt text'}<span class="token punctuation">"</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000<span class="token punctuation">"</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">:modifiers</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ resize: 'cover' }<span class="token punctuation">"</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">:sizes</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">'</span>xs:100vw sm:100vw md:100vw lg:1000px'<span class="token punctuation">"</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">format</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>webp<span class="token punctuation">"</span></span>
</span></span><span class="code-line"><span class="token tag">  <span class="token punctuation">/></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span>
</span></code></pre>
</div></div></div></div></div><div class="wrap h2body-exist"><div class="wrap-header h2wrap"><h2 id="优化字体"><a aria-hidden="true" tabindex="-1" href="#优化字体"><span class="icon icon-link"></span></a>优化字体</h2><div class="wrap-body">
<p>Nuxt 3 没有像 Next.js 13 那样内置深度集成的 <code>@next/font</code>。常用的方法有：</p>
</div></div><div class="h2wrap-body"><div class="wrap h3body-not-exist row-span-2"><div class="wrap-header h3wrap"><h3 id="手动引入-本地或-cdn"><a aria-hidden="true" tabindex="-1" href="#手动引入-本地或-cdn"><span class="icon icon-link"></span></a>手动引入 (本地或 CDN)</h3><div class="wrap-body">
<!--rehype:wrap-class=row-span-2-->
<p>在全局 CSS 文件 (如 <code>assets/css/main.css</code>) 或布局组件的 <code>&#x3C;style></code> 中使用 <code>@font-face</code> 或 <code>@import</code>。</p>
<pre class="language-css"><code class="language-css code-highlight"><span class="code-line"><span class="token comment">/* assets/css/main.css */</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">/* 1. 使用 @font-face 引入本地字体文件 (放在 public/fonts/ 或 assets/fonts/) */</span>
</span><span class="code-line"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'Inter'</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'/fonts/inter-v12-latin-regular.woff2'</span><span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'woff2'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">       <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'/fonts/inter-v12-latin-regular.woff'</span><span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'woff'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token property">font-weight</span><span class="token punctuation">:</span> <span class="token number">400</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token property">font-display</span><span class="token punctuation">:</span> swap<span class="token punctuation">;</span> <span class="token comment">/* 推荐使用 swap */</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'Inter'</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'/fonts/inter-v12-latin-700.woff2'</span><span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'woff2'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">       <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'/fonts/inter-v12-latin-700.woff'</span><span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'woff'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token property">font-weight</span><span class="token punctuation">:</span> <span class="token number">700</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token property">font-display</span><span class="token punctuation">:</span> swap<span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">/* 2. 或使用 @import 从 CDN 引入 (如 Google Fonts) */</span>
</span><span class="code-line"><span class="token comment">/* @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&#x26;display=swap'); */</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token selector">body</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'Inter'</span><span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>确保在 <code>nuxt.config.ts</code> 中引入了 <code>main.css</code>。</p>
</div></div></div><div class="wrap h3body-not-exist row-span-2"><div class="wrap-header h3wrap"><h3 id="使用-nuxtjsgoogle-fonts-模块"><a aria-hidden="true" tabindex="-1" href="#使用-nuxtjsgoogle-fonts-模块"><span class="icon icon-link"></span></a>使用 <code>@nuxtjs/google-fonts</code> 模块</h3><div class="wrap-body">
<!--rehype:wrap-class=row-span-2-->
<p>安装模块: <code>npm i -D @nuxtjs/google-fonts</code>，然后在 <code>nuxt.config.ts</code> 中配置。</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// nuxt.config.ts</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  modules<span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">    <span class="token string">'@nuxtjs/google-fonts'</span>
</span><span class="code-line">  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">  googleFonts<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    families<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token comment">// 字体名称: [字重列表] 或 true (默认字重) 或 配置对象</span>
</span><span class="code-line">      Roboto<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">700</span><span class="token punctuation">,</span> <span class="token number">900</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">      Inter<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">        wght<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">700</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">        ital<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span> <span class="token comment">// 斜体</span>
</span><span class="code-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token string-property property">'Josefin+Sans'</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 加号替换空格</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">    display<span class="token operator">:</span> <span class="token string">'swap'</span><span class="token punctuation">,</span> <span class="token comment">// 默认值 'swap'</span>
</span><span class="code-line">    prefetch<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 预获取字体链接</span>
</span><span class="code-line">    preconnect<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 预连接 Google Fonts</span>
</span><span class="code-line">    <span class="token comment">// download: true, // ！！！下载字体到本地并自托管 (推荐！)</span>
</span><span class="code-line">    <span class="token comment">// useStylesheet: true // 使用 &#x3C;link rel="stylesheet"> 代替 @import</span>
</span><span class="code-line">    <span class="token comment">// base64: true // 如果 download 为 true, 可以内联 base64 字体 (不推荐，包体积大)</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre>
<p>该模块会自动处理字体的加载和优化，推荐开启 <code>download: true</code> 以获得最佳性能和隐私。</p>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="使用-tailwind-css"><a aria-hidden="true" tabindex="-1" href="#使用-tailwind-css"><span class="icon icon-link"></span></a>使用 Tailwind CSS</h3><div class="wrap-body">
<p>如果使用 <code>@nuxtjs/tailwindcss</code> 模块，可以在 <code>tailwind.config.js</code> 中配置字体。</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token comment">// tailwind.config.js</span>
</span><span class="code-line"><span class="token keyword">const</span> defaultTheme <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'tailwindcss/defaultTheme'</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token literal-property property">theme</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token literal-property property">extend</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token literal-property property">fontFamily</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token comment">// 假设已通过 @font-face 或 @nuxtjs/google-fonts 引入了 'Inter'</span>
</span><span class="code-line">        <span class="token literal-property property">sans</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Inter'</span><span class="token punctuation">,</span> <span class="token spread operator">...</span>defaultTheme<span class="token punctuation">.</span><span class="token property-access">fontFamily</span><span class="token punctuation">.</span><span class="token property-access">sans</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token comment">// ... other config</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
</div></div></div></div></div><div class="wrap h2body-exist"><div class="wrap-header h2wrap"><h2 id="优化-scripts-usehead"><a aria-hidden="true" tabindex="-1" href="#优化-scripts-usehead"><span class="icon icon-link"></span></a>优化 Scripts (<code>useHead</code>)</h2><div class="wrap-body">
<p>Nuxt 3 使用 <code>useHead</code> 组合式函数来管理 <code>&#x3C;head></code> 标签，包括 <code>&#x3C;script></code>。</p>
</div></div><div class="h2wrap-body"><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="页面特定脚本"><a aria-hidden="true" tabindex="-1" href="#页面特定脚本"><span class="icon icon-link"></span></a>页面特定脚本</h3><div class="wrap-body">
<p>在页面组件的 <code>&#x3C;script setup></code> 中使用 <code>useHead</code>。</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span>Dashboard Page<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token function">useHead</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token literal-property property">script</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">    <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">      <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">'https://example.com/dashboard-analytics.js'</span><span class="token punctuation">,</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">      <span class="token comment">// defer: true, // 或 async: true</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">      <span class="token comment">// body: true // 将脚本放在 &#x3C;body> 结束前，而不是 &#x3C;head></span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">    <span class="token punctuation">}</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token punctuation">]</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist row-span-2"><div class="wrap-header h3wrap"><h3 id="应用全局脚本"><a aria-hidden="true" tabindex="-1" href="#应用全局脚本"><span class="icon icon-link"></span></a>应用全局脚本</h3><div class="wrap-body">
<!--rehype:wrap-class=row-span-2-->
<p>在 <code>nuxt.config.ts</code> 的 <code>app.head</code> 中配置全局脚本。</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// nuxt.config.ts</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  app<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    head<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">      script<span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">          src<span class="token operator">:</span> <span class="token string">'https://example.com/global-tracker.js'</span><span class="token punctuation">,</span>
</span><span class="code-line">          async<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token comment">// body: true, // 推荐放 body 底部</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">      <span class="token punctuation">]</span>
</span><span class="code-line">      <span class="token comment">// 也可以添加 link, meta, title 等</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre>
<p>或者在 <code>app.vue</code> 或 默认布局 <code>layouts/default.vue</code> 中使用 <code>useHead</code>。</p>
</div></div></div><div class="wrap h3body-not-exist col-span-2"><div class="wrap-header h3wrap"><h3 id="内联脚本"><a aria-hidden="true" tabindex="-1" href="#内联脚本"><span class="icon icon-link"></span></a>内联脚本</h3><div class="wrap-body">
<!--rehype:wrap-class=col-span-2-->
<p>可以使用 <code>innerHTML</code> 或 <code>children</code> 属性添加内联脚本。</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// nuxt.config.ts (全局示例)</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  app<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    head<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">      script<span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">          <span class="token comment">// children 属性更安全，Nuxt 会处理转义</span>
</span><span class="code-line">          children<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">console.log('Inline script executed');</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token comment">// id: 'my-inline-script',</span>
</span><span class="code-line">          <span class="token comment">// type: 'text/javascript'</span>
</span><span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token comment">/*
</span></span><span class="code-line"><span class="token comment">        {
</span></span><span class="code-line"><span class="token comment">          // 或者使用 innerHTML (需要注意 XSS 风险)
</span></span><span class="code-line"><span class="token comment">          innerHTML: `document.getElementById('banner').style.display = 'block';`,
</span></span><span class="code-line"><span class="token comment">          // body: true
</span></span><span class="code-line"><span class="token comment">        }
</span></span><span class="code-line"><span class="token comment">        */</span>
</span><span class="code-line">      <span class="token punctuation">]</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre>
<p>在组件中使用 <code>useHead</code>:</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token function">useHead</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token literal-property property">script</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">    <span class="token punctuation">{</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">alert('Hello from inline script!');</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token punctuation">]</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="script-事件-onload-onerror"><a aria-hidden="true" tabindex="-1" href="#script-事件-onload-onerror"><span class="icon icon-link"></span></a>Script 事件 (onload, onerror)</h3><div class="wrap-body">
<p><code>useHead</code> 目前不直接支持 <code>onload</code> 或 <code>onerror</code> 回调。如果需要，可以通过创建一个包装函数或使用第三方库（如 <code>@vueuse/head</code> 提供的更高级功能，但 Nuxt 的 <code>useHead</code> 通常足够）。对于简单场景，可以在 <code>onMounted</code> 中检查脚本是否加载（例如检查脚本定义的全局变量）。</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> onMounted <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vue'</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token function">useHead</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token literal-property property">script</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">    <span class="token punctuation">{</span> <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">'https://example.com/library.js'</span><span class="token punctuation">,</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'lib-script'</span> <span class="token punctuation">}</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token punctuation">]</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token keyword">const</span> script <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'lib-script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>script<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">    script<span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">      <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Library script loaded!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">      <span class="token comment">// 可以在这里调用库的函数</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">      <span class="token comment">// if (window.myLibrary) { window.myLibrary.init(); }</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">    script<span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">      <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token string">'Failed to load library script.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token punctuation">}</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token comment">// 或者轮询检查脚本是否定义了某个全局变量</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token comment">/*
</span></span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">  const interval = setInterval(() => {
</span></span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">    if (window.myLibrary) {
</span></span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">      console.log('Library ready!');
</span></span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">      window.myLibrary.init();
</span></span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">      clearInterval(interval);
</span></span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">    }
</span></span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">  }, 100);
</span></span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">  */</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
</span></code></pre>
</div></div></div></div></div><div class="wrap h2body-exist"><div class="wrap-header h2wrap"><h2 id="eslint"><a aria-hidden="true" tabindex="-1" href="#eslint"><span class="icon icon-link"></span></a>ESLint</h2><div class="wrap-body">
</div></div><div class="h2wrap-body"><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="集成-eslint"><a aria-hidden="true" tabindex="-1" href="#集成-eslint"><span class="icon icon-link"></span></a>集成 ESLint</h3><div class="wrap-body">
<p>Nuxt 3 推荐使用 <code>@nuxtjs/eslint-module</code>。</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">npx nuxi module <span class="token function">add</span> eslint <span class="token parameter variable">--install</span>
</span><span class="code-line"><span class="token comment"># 或者手动安装</span>
</span><span class="code-line"><span class="token comment"># npm install --save-dev @nuxtjs/eslint-module eslint @nuxtjs/eslint-config-typescript</span>
</span><span class="code-line"><span class="token comment"># yarn add --dev @nuxtjs/eslint-module eslint @nuxtjs/eslint-config-typescript</span>
</span><span class="code-line"><span class="token comment"># pnpm add -D @nuxtjs/eslint-module eslint @nuxtjs/eslint-config-typescript</span>
</span></code></pre>
<p>然后在 <code>nuxt.config.ts</code> 中添加模块：</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// nuxt.config.ts</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  modules<span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">    <span class="token string">'@nuxtjs/eslint-module'</span>
</span><span class="code-line">  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token comment">// 可选配置</span>
</span><span class="code-line">  eslint<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    lintOnStart<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 不在开发服务器启动时检查 (推荐 false 以加快启动)</span>
</span><span class="code-line">    <span class="token comment">// cache: false,</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre>
<p>在 <code>package.json</code> 中添加 lint 脚本：</p>
<pre class="language-json"><code class="language-json code-highlight"><span class="code-line"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token property">"lint"</span><span class="token operator">:</span> <span class="token string">"eslint ."</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token property">"lint:fix"</span><span class="token operator">:</span> <span class="token string">"eslint . --fix"</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>创建一个 <code>.eslintrc.cjs</code> (或 <code>.js</code>, <code>.json</code>) 配置文件：</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token comment">// .eslintrc.cjs</span>
</span><span class="code-line">module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">    <span class="token string">'plugin:vue/vue3-essential'</span><span class="token punctuation">,</span> <span class="token comment">// Vue 3 基础规则</span>
</span><span class="code-line">    <span class="token string">'@nuxtjs/eslint-config-typescript'</span> <span class="token comment">// Nuxt + TypeScript 推荐规则</span>
</span><span class="code-line">    <span class="token comment">// 'prettier' // 如果使用 Prettier，确保这是最后一个 (见下文)</span>
</span><span class="code-line">  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token literal-property property">ecmaVersion</span><span class="token operator">:</span> <span class="token string">'latest'</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// 在这里覆盖或添加规则</span>
</span><span class="code-line">    <span class="token comment">// "vue/multi-word-component-names": "off",</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>运行 <code>npm run lint</code> 或 <code>yarn lint</code> 或 <code>pnpm lint</code>。</p>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="自定义配置"><a aria-hidden="true" tabindex="-1" href="#自定义配置"><span class="icon icon-link"></span></a>自定义配置</h3><div class="wrap-body">
<p>直接修改 <code>.eslintrc.cjs</code> 文件即可。</p>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="对自定义目录和文件进行检查"><a aria-hidden="true" tabindex="-1" href="#对自定义目录和文件进行检查"><span class="icon icon-link"></span></a>对自定义目录和文件进行检查</h3><div class="wrap-body">
<p>ESLint CLI 支持指定目录或文件：</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># 只检查 components 和 composables 目录</span>
</span><span class="code-line">eslint components composables
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 检查特定文件</span>
</span><span class="code-line">eslint pages/index.vue utils/helpers.ts
</span></code></pre>
<p>可以在 <code>package.json</code> 中定义更具体的脚本。</p>
</div></div></div><div class="wrap h3body-not-exist row-span-2"><div class="wrap-header h3wrap"><h3 id="禁用规则"><a aria-hidden="true" tabindex="-1" href="#禁用规则"><span class="icon icon-link"></span></a>禁用规则</h3><div class="wrap-body">
<!--rehype:wrap-class=row-span-2-->
<p>在 <code>.eslintrc.cjs</code> 的 <code>rules</code> 部分添加规则并设置为 <code>"off"</code> 或 <code>0</code>。</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token comment">// .eslintrc.cjs</span>
</span><span class="code-line">module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// ...</span>
</span><span class="code-line">  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token string-property property">'vue/no-multiple-template-root'</span><span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 Vue 3 不再需要的规则</span>
</span><span class="code-line">    <span class="token string-property property">'@typescript-eslint/no-unused-vars'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'warn'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">'argsIgnorePattern'</span><span class="token operator">:</span> <span class="token string">'^_'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 未使用的变量警告（忽略下划线开头的）</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>也可以使用行内注释禁用：</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token comment">// eslint-disable-next-line no-console</span>
</span><span class="code-line"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'临时允许 console.log'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="prettier-集成"><a aria-hidden="true" tabindex="-1" href="#prettier-集成"><span class="icon icon-link"></span></a>Prettier 集成</h3><div class="wrap-body">
<p>安装 Prettier 和 ESLint 的集成插件：</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">npm</span> <span class="token function">install</span> --save-dev prettier eslint-config-prettier eslint-plugin-prettier
</span><span class="code-line"><span class="token comment"># yarn add --dev prettier eslint-config-prettier eslint-plugin-prettier</span>
</span><span class="code-line"><span class="token comment"># pnpm add -D prettier eslint-config-prettier eslint-plugin-prettier</span>
</span></code></pre>
<p>在 <code>.eslintrc.cjs</code> 的 <code>extends</code> 数组<strong>末尾</strong>添加 <code>'prettier'</code> (禁用与 Prettier 冲突的规则) 或 <code>'plugin:prettier/recommended'</code> (应用 Prettier 规则并报告差异为 ESLint 错误)。</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token comment">// .eslintrc.cjs (推荐方式)</span>
</span><span class="code-line">module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">    <span class="token string">'plugin:vue/vue3-essential'</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token string">'@nuxtjs/eslint-config-typescript'</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token string">'plugin:prettier/recommended'</span> <span class="token comment">// 集成 Prettier</span>
</span><span class="code-line">  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token comment">// ...</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>创建 <code>.prettierrc.js</code> (或 <code>.json</code>, <code>.yaml</code>) 配置文件：</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token comment">// .prettierrc.js</span>
</span><span class="code-line">module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token literal-property property">semi</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 不加分号</span>
</span><span class="code-line">  <span class="token literal-property property">singleQuote</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 使用单引号</span>
</span><span class="code-line">  <span class="token literal-property property">trailingComma</span><span class="token operator">:</span> <span class="token string">'es5'</span><span class="token punctuation">,</span> <span class="token comment">// 尾随逗号</span>
</span><span class="code-line">  <span class="token literal-property property">printWidth</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token comment">// 行宽</span>
</span><span class="code-line">  <span class="token comment">// ... 其他 Prettier 选项</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist col-span-2"><div class="wrap-header h3wrap"><h3 id="lint-staged"><a aria-hidden="true" tabindex="-1" href="#lint-staged"><span class="icon icon-link"></span></a>lint-staged</h3><div class="wrap-body">
<!--rehype:wrap-class=col-span-2-->
<p>结合 Husky 和 lint-staged 可以在 Git 提交前自动检查和修复暂存文件。</p>
<p>安装：</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">npm</span> <span class="token function">install</span> --save-dev husky lint-staged
</span><span class="code-line"><span class="token comment"># yarn add --dev husky lint-staged</span>
</span><span class="code-line"><span class="token comment"># pnpm add -D husky lint-staged</span>
</span><span class="code-line">npx husky <span class="token function">install</span>
</span><span class="code-line"><span class="token function">npm</span> set-script prepare <span class="token string">"husky install"</span> <span class="token comment"># 或 yarn husky install</span>
</span><span class="code-line">npx husky <span class="token function">add</span> .husky/pre-commit <span class="token string">"npx lint-staged"</span>
</span></code></pre>
<p>在 <code>package.json</code> 或 <code>.lintstagedrc.js</code> 中配置 <code>lint-staged</code>：</p>
<pre class="language-json"><code class="language-json code-highlight"><span class="code-line"><span class="token comment">// package.json</span>
</span><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token property">"lint-staged"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token property">"*.{js,ts,vue}"</span><span class="token operator">:</span> <span class="token string">"eslint --fix"</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">"*.{css,scss,vue}"</span><span class="token operator">:</span> <span class="token string">"prettier --write"</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token comment">// .lintstagedrc.js</span>
</span><span class="code-line">module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token string-property property">'*.{js,ts,vue}'</span><span class="token operator">:</span> <span class="token string">'eslint --fix'</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token string-property property">'*.{css,scss,vue,json,md}'</span><span class="token operator">:</span> <span class="token string">'prettier --write'</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
</div></div></div></div></div><div class="wrap h2body-exist"><div class="wrap-header h2wrap"><h2 id="typescript"><a aria-hidden="true" tabindex="-1" href="#typescript"><span class="icon icon-link"></span></a>TypeScript</h2><div class="wrap-body">
<p>Nuxt 3 是 TypeScript 优先的框架。</p>
</div></div><div class="h2wrap-body"><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="创建项目-自带-ts"><a aria-hidden="true" tabindex="-1" href="#创建项目-自带-ts"><span class="icon icon-link"></span></a>创建项目 (自带 TS)</h3><div class="wrap-body">
<p><code>npx nuxi init &#x3C;project-name></code> 默认创建的就是 TypeScript 项目，包含 <code>tsconfig.json</code>。</p>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="类型检查"><a aria-hidden="true" tabindex="-1" href="#类型检查"><span class="icon icon-link"></span></a>类型检查</h3><div class="wrap-body">
<p>Nuxt 3 会自动生成类型 (<code>.nuxt/nuxt.d.ts</code>)，提供自动导入、配置、API 的类型提示。</p>
<p>运行类型检查：</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">npx nuxi typecheck
</span><span class="code-line"><span class="token comment"># 或者</span>
</span><span class="code-line"><span class="token function">npm</span> run typecheck <span class="token comment"># (如果 package.json 中定义了脚本)</span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist col-span-2 row-span-2"><div class="wrap-header h3wrap"><h3 id="数据获取类型"><a aria-hidden="true" tabindex="-1" href="#数据获取类型"><span class="icon icon-link"></span></a>数据获取类型</h3><div class="wrap-body">
<!--rehype:wrap-class=col-span-2 row-span-2-->
<p><code>useFetch</code> 和 <code>useAsyncData</code> 支持泛型来指定返回数据的类型。</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword">interface</span> <span class="token class-name">Post</span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token literal-property property">id</span><span class="token operator">:</span> number<span class="token punctuation">;</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token literal-property property">title</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token literal-property property">body</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token punctuation">}</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">// useFetch 的类型会自动从 API 响应推断 (如果 API 返回类型良好)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">// 但显式指定更安全</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span> post<span class="token punctuation">,</span> pending<span class="token punctuation">,</span> error <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> useFetch<span class="token operator">&#x3C;</span><span class="token maybe-class-name">Post</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token string">'/api/posts/1'</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>post<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">.</span><span class="token property-access">title</span><span class="token punctuation">)</span> <span class="token comment">// 类型安全</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token punctuation">}</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">// useAsyncData 需要显式指定类型</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span> posts <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> useAsyncData<span class="token operator">&#x3C;</span><span class="token maybe-class-name">Post</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token string">'postsList'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">$fetch</span><span class="token punctuation">(</span><span class="token string">'/api/posts'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>posts<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  posts<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">p</span> <span class="token arrow operator">=></span> <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 类型安全</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token punctuation">}</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">// pick 选项也会影响类型</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span> postTitle <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">useFetch</span><span class="token punctuation">(</span><span class="token string">'/api/posts/1'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token literal-property property">pick</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span> <span class="token comment">// data 的类型会变成 Pick&#x3C;Post, 'title'></span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>postTitle<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>postTitle<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">.</span><span class="token property-access">title</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token comment">// console.log(postTitle.value.id); // TS 报错，因为 id 没被 pick</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token punctuation">}</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">// transform 选项改变类型</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span> postLength <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> useFetch<span class="token operator">&#x3C;</span><span class="token maybe-class-name">Post</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token string">'/api/posts/1'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token punctuation">(</span>post<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">number</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">    <span class="token keyword control-flow">return</span> post<span class="token punctuation">.</span><span class="token property-access">body</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token punctuation">}</span> <span class="token comment">// data 类型现在是 number | null</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist row-span-2"><div class="wrap-header h3wrap"><h3 id="api-路由-server-routes"><a aria-hidden="true" tabindex="-1" href="#api-路由-server-routes"><span class="icon icon-link"></span></a>API 路由 (Server Routes)</h3><div class="wrap-body">
<!--rehype:wrap-class=row-span-2-->
<p>API 路由位于 <code>server/api/</code> 目录下，使用 <code>defineEventHandler</code>。类型通常会自动推断。</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// server/api/hello.ts</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> IncomingMessage<span class="token punctuation">,</span> ServerResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'http'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// defineEventHandler 会处理请求和响应对象，简化类型</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineEventHandler</span><span class="token punctuation">(</span>event <span class="token operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// event 对象包含 request, response 等信息</span>
</span><span class="code-line">  <span class="token comment">// event.node.req (原生 Node 请求对象)</span>
</span><span class="code-line">  <span class="token comment">// event.node.res (原生 Node 响应对象)</span>
</span><span class="code-line">  <span class="token comment">// event.context (请求上下文，可以添加中间件信息)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 读取查询参数</span>
</span><span class="code-line">  <span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token function">getQuery</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token comment">// { name: 'World' } for /api/hello?name=World</span>
</span><span class="code-line">  <span class="token keyword">const</span> name <span class="token operator">=</span> query<span class="token punctuation">.</span>name <span class="token operator">||</span> <span class="token string">'World'</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 读取请求体 (需要异步)</span>
</span><span class="code-line">  <span class="token comment">// const body = await readBody(event)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 设置 header</span>
</span><span class="code-line">  <span class="token comment">// event.node.res.setHeader('Content-Type', 'application/json')</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 返回值会被自动序列化 (通常是 JSON)</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">    message<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 也可以定义更具体的返回类型</span>
</span><span class="code-line"><span class="token keyword">interface</span> <span class="token class-name">HelloResponse</span> <span class="token punctuation">{</span>
</span><span class="code-line">  message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token generic-function"><span class="token function">defineEventHandler</span><span class="token generic class-name"><span class="token operator">&#x3C;</span>HelloResponse<span class="token operator">></span></span></span><span class="token punctuation">(</span>event <span class="token operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">   <span class="token comment">// ...</span>
</span><span class="code-line">   <span class="token keyword">return</span> <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">'Hello'</span> <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="自定义-appvue"><a aria-hidden="true" tabindex="-1" href="#自定义-appvue"><span class="icon icon-link"></span></a>自定义 <code>app.vue</code></h3><div class="wrap-body">
<p>如果需要自定义 <code>app.vue</code> (不常见)，它就是一个标准的 Vue 3 TypeScript 组件。</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line">// app.vue
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>NuxtLayout</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>NuxtPage</span> <span class="token punctuation">/></span></span> <span class="token comment">&#x3C;!-- 必须包含 NuxtPage --></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>NuxtLayout</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">// 可以在这里添加全局逻辑或状态初始化</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useHead <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'#imports'</span> <span class="token comment">// Nuxt 自动导入</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token function">useHead</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token function-variable function">titleTemplate</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">titleChunk</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">    <span class="token keyword control-flow">return</span> titleChunk <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>titleChunk<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> - My Nuxt App</span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">'My Nuxt App'</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token punctuation">}</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="类型化-nuxtconfigts"><a aria-hidden="true" tabindex="-1" href="#类型化-nuxtconfigts"><span class="icon icon-link"></span></a>类型化 <code>nuxt.config.ts</code></h3><div class="wrap-body">
<p><code>defineNuxtConfig</code> 提供了完整的类型提示。</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// nuxt.config.ts</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> defineNuxtConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'nuxt/config'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  devtools<span class="token operator">:</span> <span class="token punctuation">{</span> enabled<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  modules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@nuxtjs/tailwindcss'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">  css<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'~/assets/css/main.css'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">  runtimeConfig<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 运行时配置 (服务端可用)</span>
</span><span class="code-line">    apiKey<span class="token operator">:</span> <span class="token string">'default-secret-key'</span><span class="token punctuation">,</span> <span class="token comment">// process.env.NUXT_API_KEY 会覆盖</span>
</span><span class="code-line">    <span class="token keyword">public</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 公开配置 (客户端和服务端都可用)</span>
</span><span class="code-line">      baseUrl<span class="token operator">:</span> <span class="token string">'/api'</span><span class="token punctuation">,</span> <span class="token comment">// process.env.NUXT_PUBLIC_BASE_URL 会覆盖</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token comment">// ... 其他选项都有类型提示</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="忽略-typescript-错误"><a aria-hidden="true" tabindex="-1" href="#忽略-typescript-错误"><span class="icon icon-link"></span></a>忽略 TypeScript 错误</h3><div class="wrap-body">
<p>可以在 <code>nuxt.config.ts</code> 中配置，但不推荐用于生产构建。</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// nuxt.config.ts</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line highlight-line">  typescript<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line highlight-line">    <span class="token comment">// 在构建时忽略 TS 错误</span>
</span><span class="code-line highlight-line">    <span class="token comment">// typeCheck: false, // (旧版本或特定场景)</span>
</span><span class="code-line">    shim<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// 是否生成 shim 文件</span>
</span><span class="code-line">    <span class="token comment">// 推荐: 使用 `npx nuxi typecheck` 单独检查类型</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre>
</div></div></div></div></div><div class="wrap h2body-exist"><div class="wrap-header h2wrap"><h2 id="环境变量"><a aria-hidden="true" tabindex="-1" href="#环境变量"><span class="icon icon-link"></span></a>环境变量</h2><div class="wrap-body">
</div></div><div class="h2wrap-body"><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="加载环境变量"><a aria-hidden="true" tabindex="-1" href="#加载环境变量"><span class="icon icon-link"></span></a>加载环境变量</h3><div class="wrap-body">
<p>Nuxt 3 默认从项目根目录的 <code>.env</code> 文件加载环境变量。</p>
<pre class="language-ini"><code class="language-ini code-highlight"><span class="code-line"><span class="token comment"># .env</span>
</span><span class="code-line"><span class="token key attr-name">DB_HOST</span><span class="token punctuation">=</span><span class="token value attr-value">localhost</span>
</span><span class="code-line"><span class="token key attr-name">DB_USER</span><span class="token punctuation">=</span><span class="token value attr-value">myuser</span>
</span><span class="code-line"><span class="token key attr-name">DB_PASS</span><span class="token punctuation">=</span><span class="token value attr-value">secretpassword</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 暴露给客户端的变量需要 NUXT_PUBLIC_ 前缀</span>
</span><span class="code-line"><span class="token key attr-name">NUXT_PUBLIC_GOOGLE_ANALYTICS_ID</span><span class="token punctuation">=</span><span class="token value attr-value">UA-1234567-8</span>
</span><span class="code-line"><span class="token key attr-name">NUXT_PUBLIC_API_BASE_URL</span><span class="token punctuation">=</span><span class="token value attr-value">/api</span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="使用环境变量-runtime-config"><a aria-hidden="true" tabindex="-1" href="#使用环境变量-runtime-config"><span class="icon icon-link"></span></a>使用环境变量 (Runtime Config)</h3><div class="wrap-body">
<p>推荐使用 <strong>Runtime Config</strong> 来访问环境变量，它提供了类型安全和更好的管理。</p>
<p>在 <code>nuxt.config.ts</code> 中定义 <code>runtimeConfig</code>:</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// nuxt.config.ts</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  runtimeConfig<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// 只在服务端可用的私有键 (默认从 .env 读取)</span>
</span><span class="code-line">    dbUser<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DB_USER</span><span class="token punctuation">,</span> <span class="token comment">// 也可以直接赋值</span>
</span><span class="code-line">    dbPassword<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DB_PASS</span><span class="token punctuation">,</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// public 中的键在客户端和服务端都可用</span>
</span><span class="code-line">    <span class="token keyword">public</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">      gaId<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NUXT_PUBLIC_GOOGLE_ANALYTICS_ID</span><span class="token punctuation">,</span>
</span><span class="code-line">      apiBaseUrl<span class="token operator">:</span> <span class="token string">'/api'</span> <span class="token comment">// 默认值</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre>
<p>在应用中使用 <code>useRuntimeConfig()</code>：</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token function">useRuntimeConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">// 在 &#x3C;script setup> 或 setup() 中 (服务端和客户端)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'API Base URL:'</span><span class="token punctuation">,</span> config<span class="token punctuation">.</span><span class="token property-access">public</span><span class="token punctuation">.</span><span class="token property-access">apiBaseUrl</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'GA ID:'</span><span class="token punctuation">,</span> config<span class="token punctuation">.</span><span class="token property-access">public</span><span class="token punctuation">.</span><span class="token property-access">gaId</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">// 只能在服务端访问私有键 (例如 API 路由、服务器插件)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">// console.log('DB User:', config.dbUser) // 在客户端会是 undefined</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">// 如果在服务端代码中 (如 server/api/ or server/plugins/)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">// 可以直接访问 config.dbUser</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token property-access">server</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'DB User (server-side):'</span><span class="token punctuation">,</span> config<span class="token punctuation">.</span><span class="token property-access">dbUser</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token punctuation">}</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">// 在 API 路由中使用</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">// server/api/my-endpoint.ts</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineEventHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token function">useRuntimeConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Accessing DB User in API:'</span><span class="token punctuation">,</span> config<span class="token punctuation">.</span><span class="token property-access">dbUser</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'ok'</span> <span class="token punctuation">}</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="变量扩展和转义"><a aria-hidden="true" tabindex="-1" href="#变量扩展和转义"><span class="icon icon-link"></span></a>变量扩展和转义</h3><div class="wrap-body">
<p>Vite (Nuxt 3 底层) 支持 <code>.env</code> 文件中的变量扩展，但行为可能与 Next.js 的 <code>dotenv-expand</code> 略有不同。通常建议避免复杂的变量扩展。</p>
<p>如果需要美元符号 <code>$</code>，通常不需要转义，但具体取决于上下文。</p>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="优先级"><a aria-hidden="true" tabindex="-1" href="#优先级"><span class="icon icon-link"></span></a>优先级</h3><div class="wrap-body">
<p>环境变量加载优先级：<code>.env.production</code> > <code>.env.development</code> > <code>.env</code> > 系统环境变量。 <code>process.env</code> 中的同名变量（如 <code>NUXT_PUBLIC_API_BASE_URL</code>）会覆盖 <code>runtimeConfig</code> 中的默认值。</p>
</div></div></div></div></div><div class="wrap h2body-exist"><div class="wrap-header h2wrap"><h2 id="路由"><a aria-hidden="true" tabindex="-1" href="#路由"><span class="icon icon-link"></span></a>路由</h2><div class="wrap-body">
<p>Nuxt 根据 <code>pages/</code> 目录结构自动生成 Vue Router 配置。</p>
</div></div><div class="h2wrap-body"><div class="wrap h3body-not-exist row-span-2"><div class="wrap-header h3wrap"><h3 id="基础路由"><a aria-hidden="true" tabindex="-1" href="#基础路由"><span class="icon icon-link"></span></a>基础路由</h3><div class="wrap-body">
<!--rehype:wrap-class=row-span-2-->
<p>文件结构决定路由路径。</p>

































<table class="style-list"><thead><tr><th align="left">:--</th><th>--</th></tr></thead><tbody><tr><td align="left"><code>pages/index.vue</code></td><td><pur><code>/</code></pur></td></tr><tr><td align="left"><code>pages/about.vue</code></td><td><pur><code>/about</code></pur></td></tr><tr><td align="left"><code>pages/blog/index.vue</code></td><td><pur><code>/blog</code></pur></td></tr><tr><td align="left"><code>pages/blog/first-post.vue</code></td><td><pur><code>/blog/first-post</code></pur></td></tr><tr><td align="left"><code>pages/users/index.vue</code></td><td><pur><code>/users</code></pur></td></tr><tr><td align="left"><code>pages/users/profile.vue</code></td><td><pur><code>/users/profile</code></pur></td></tr></tbody></table>
<!--rehype:className=style-list-->
</div></div></div><div class="wrap h3body-not-exist row-span-2"><div class="wrap-header h3wrap"><h3 id="动态路由"><a aria-hidden="true" tabindex="-1" href="#动态路由"><span class="icon icon-link"></span></a>动态路由</h3><div class="wrap-body">
<!--rehype:wrap-class=row-span-2-->
<p>使用方括号 <code>[]</code> 定义动态参数。</p>

























<table class="style-list"><thead><tr><th align="left">:--</th><th>--</th></tr></thead><tbody><tr><td align="left"><code>pages/users/[id].vue</code></td><td><pur><code>/users/:id</code></pur> (<yel><code>/users/123</code></yel>)</td></tr><tr><td align="left"><code>pages/posts/[slug].vue</code></td><td><pur><code>/posts/:slug</code></pur> (<yel><code>/posts/my-first-post</code></yel>)</td></tr><tr><td align="left"><code>pages/products/[category]/[productId].vue</code></td><td><pur><code>/products/:category/:productId</code></pur> (<yel><code>/products/electronics/456</code></yel>)</td></tr><tr><td align="left"><code>pages/[username]/settings.vue</code></td><td><pur> <code>/:username/settings</code> </pur> (<yel><code>/john_doe/settings</code></yel>)</td></tr></tbody></table>
<!--rehype:className=style-list-->
<p>在组件中访问路由参数：</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line">// pages/users/[id].vue
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span>User ID: {{ $route.params.id }}<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useRoute <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vue-router'</span> <span class="token comment">// 或 Nuxt 自动导入的 useRoute</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword">const</span> userId <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> route<span class="token punctuation">.</span><span class="token property-access">params</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span> <span class="token comment">// 使用 computed 获取响应式参数</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'User ID from setup:'</span><span class="token punctuation">,</span> route<span class="token punctuation">.</span><span class="token property-access">params</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist row-span-2"><div class="wrap-header h3wrap"><h3 id="捕获所有路由-catch-all"><a aria-hidden="true" tabindex="-1" href="#捕获所有路由-catch-all"><span class="icon icon-link"></span></a>捕获所有路由 (Catch-all)</h3><div class="wrap-body">
<!--rehype:wrap-class=row-span-2-->
<p>使用带有三个点的方括号 <code>[...]</code>。</p>













<table><thead><tr><th align="left">:--</th><th>--</th></tr></thead><tbody><tr><td align="left"><code>pages/articles/[...slug].vue</code></td><td><pur><code>/articles/*</code></pur> (<yel><code>/articles/a/b/c</code></yel>)</td></tr></tbody></table>
<p>参数值是一个数组。</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line">// pages/articles/[...slug].vue
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span>Article Slug Parts: {{ slugParts }}<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">// route.params.slug 会是 ['a', 'b', 'c'] 对于 /articles/a/b/c</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword">const</span> slugParts <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> route<span class="token punctuation">.</span><span class="token property-access">params</span><span class="token punctuation">.</span><span class="token property-access">slug</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="可选捕获所有路由-optional-catch-all"><a aria-hidden="true" tabindex="-1" href="#可选捕获所有路由-optional-catch-all"><span class="icon icon-link"></span></a>可选捕获所有路由 (Optional Catch-all)</h3><div class="wrap-body">
<p>使用双方括号 <code>[[...]]</code>。这会匹配根路径以及之后的所有路径。</p>













<table><thead><tr><th align="left">:--</th><th>--</th></tr></thead><tbody><tr><td align="left"><code>pages/optional/[[...slug]].vue</code></td><td><pur><code>/optional/*</code></pur> (匹配 <yel><code>/optional</code></yel>, <yel><code>/optional/a</code></yel>, <yel><code>/optional/a/b</code></yel>)</td></tr></tbody></table>
<ul>
<li>访问 <code>/optional</code> 时, <code>route.params.slug</code> 是 <code>undefined</code>。</li>
<li>访问 <code>/optional/a</code> 时, <code>route.params.slug</code> 是 <code>['a']</code>。</li>
<li>访问 <code>/optional/a/b</code> 时, <code>route.params.slug</code> 是 <code>['a', 'b']</code>。</li>
</ul>
</div></div></div><div class="wrap h3body-not-exist row-span-2"><div class="wrap-header h3wrap"><h3 id="页面之间的链接-nuxtlink"><a aria-hidden="true" tabindex="-1" href="#页面之间的链接-nuxtlink"><span class="icon icon-link"></span></a>页面之间的链接 (<code>&#x3C;NuxtLink></code>)</h3><div class="wrap-body">
<!--rehype:wrap-class=row-span-2-->
<p>使用 <code>&#x3C;NuxtLink></code> 组件进行内部导航。</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>nav</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>ul</span><span class="token punctuation">></span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>li</span><span class="token punctuation">></span></span>
</span><span class="code-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>NuxtLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>NuxtLink</span><span class="token punctuation">></span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>li</span><span class="token punctuation">></span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>li</span><span class="token punctuation">></span></span>
</span><span class="code-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>NuxtLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/about<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>关于我们<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>NuxtLink</span><span class="token punctuation">></span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>li</span><span class="token punctuation">></span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>li</span><span class="token punctuation">></span></span>
</span><span class="code-line">        <span class="token comment">&#x3C;!-- 链接到动态路由 --></span>
</span><span class="code-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>NuxtLink</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>`/users/${userId}`<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>我的主页<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>NuxtLink</span><span class="token punctuation">></span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>li</span><span class="token punctuation">></span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>li</span><span class="token punctuation">></span></span>
</span><span class="code-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>NuxtLink</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ name: 'posts-slug', params: { slug: postSlug } }<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
</span><span class="code-line">          博文 (命名路由)
</span><span class="code-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>NuxtLink</span><span class="token punctuation">></span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>li</span><span class="token punctuation">></span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>li</span><span class="token punctuation">></span></span>
</span><span class="code-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>NuxtLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/external-page<span class="token punctuation">"</span></span> <span class="token attr-name">external</span><span class="token punctuation">></span></span>外部链接<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>NuxtLink</span><span class="token punctuation">></span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>li</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>ul</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>nav</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword">const</span> userId <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword">const</span> postSlug <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'hello-nuxt'</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">// 可以通过 `npx nuxi routes` 查看生成的路由名称</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token comment">// 例如 pages/posts/[slug].vue 的名称可能是 'posts-slug'</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css"><span class="token comment">/* NuxtLink 活动链接的默认 class */</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css"><span class="token selector"><span class="token class">.router-link-active</span></span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css">  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css"><span class="token punctuation">}</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css"><span class="token comment">/* NuxtLink 精确匹配活动链接的默认 class */</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css"><span class="token selector"><span class="token class">.router-link-exact-active</span></span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css">  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token hexcode color">#41B883</span><span class="token punctuation">;</span> <span class="token comment">/* Vue Green */</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css"><span class="token punctuation">}</span>
</span></span></span><span class="code-line"><span class="token style"><span class="token language-css"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>style</span><span class="token punctuation">></span></span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="编程式导航-userouter"><a aria-hidden="true" tabindex="-1" href="#编程式导航-userouter"><span class="icon icon-link"></span></a>编程式导航 (<code>useRouter</code>)</h3><div class="wrap-body">
<p>使用 <code>useRouter</code> 获取 router 实例。</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>goToAbout<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>跳转到关于页<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>goToPost('my-latest-post')<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>查看最新帖子<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useRouter <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vue-router'</span> <span class="token comment">// 或 Nuxt 自动导入</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword">function</span> <span class="token function">goToAbout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  router<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token string">'/about'</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token punctuation">}</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token keyword">function</span> <span class="token function">goToPost</span><span class="token punctuation">(</span><span class="token parameter">slug</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token comment">// 使用路径</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token comment">// router.push(`/posts/${slug}`)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token comment">// 或使用命名路由和参数 (推荐)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  router<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'posts-slug'</span><span class="token punctuation">,</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> slug <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token punctuation">}</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="路由元信息-definepagemeta"><a aria-hidden="true" tabindex="-1" href="#路由元信息-definepagemeta"><span class="icon icon-link"></span></a>路由元信息 (<code>definePageMeta</code>)</h3><div class="wrap-body">
<p>在页面组件中使用 <code>definePageMeta</code> 添加路由元信息，可用于中间件、布局等。</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line">// pages/admin/index.vue
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token function">definePageMeta</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token literal-property property">layout</span><span class="token operator">:</span> <span class="token string">'admin'</span><span class="token punctuation">,</span> <span class="token comment">// 指定布局</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token literal-property property">middleware</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'auth'</span><span class="token punctuation">,</span> <span class="token string">'admin-only'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 应用中间件 (文件位于 middleware/ 目录下)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token comment">// alias: ['/dashboard'], // 路由别名</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token comment">// keepalive: true, // 缓存页面状态</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token comment">// key: route => route.fullPath, // 自定义 key 用于 &#x3C;NuxtPage :page-key="..."></span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token comment">// transition: { name: 'fade', mode: 'out-in' } // 页面过渡效果</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="路由中间件"><a aria-hidden="true" tabindex="-1" href="#路由中间件"><span class="icon icon-link"></span></a>路由中间件</h3><div class="wrap-body">
<p>创建 <code>middleware/auth.ts</code> (或其他名称)：</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// middleware/auth.ts</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtRouteMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> from<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> isLoggedIn <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token comment">// 实际应用中应检查用户登录状态</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isLoggedIn <span class="token operator">&#x26;&#x26;</span> to<span class="token punctuation">.</span>path <span class="token operator">!==</span> <span class="token string">'/login'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// console.log(`Redirecting from ${from.path} to /login (accessed ${to.path})`)</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span> <span class="token comment">// Nuxt 提供的重定向辅助函数</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token comment">// 如果已登录或访问的是登录页，则继续导航</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre>
<p>然后在 <code>definePageMeta</code> 或 <code>nuxt.config.ts</code> (全局中间件) 中应用。</p>
</div></div></div></div></div><div class="wrap h2body-not-exist"><div class="wrap-header h2wrap"><h2 id="另见"><a aria-hidden="true" tabindex="-1" href="#另见"><span class="icon icon-link"></span></a>另见</h2><div class="wrap-body">
<ul>
<li><a href="https://nuxt.com/docs">Nuxt.js 官方文档</a></li>
<li><a href="https://nuxt.com/modules">Nuxt Community Modules</a></li>
<li><a href="https://nitro.unjs.io/">Nitro Server Engine 文档</a></li>
<li><a href="https://vuejs.org/guide/introduction.html">Vue 3 文档</a></li>
<li><a href="https://vitejs.dev/">Vite 文档</a></li>
</ul>
</div></div><div class="h2wrap-body"></div></div></div></div><footer class="footer-wrap"><footer class="max-container"><a href="https://www.vipzhicheng.com" target="_blank">理查</a>的速查表@2025</footer></footer><script src="../data.js?v=1.8.1" defer></script><script src="../js/fuse.min.js?v=1.8.1" defer></script><script src="../js/main.js?v=1.8.1" defer></script><div id="mysearch"><div class="mysearch-box"><div class="mysearch-input"><div><svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" viewBox="0 0 18 18">
  <path fill="currentColor" d="M17.71,16.29 L14.31,12.9 C15.4069846,11.5024547 16.0022094,9.77665502 16,8 C16,3.581722 12.418278,0 8,0 C3.581722,0 0,3.581722 0,8 C0,12.418278 3.581722,16 8,16 C9.77665502,16.0022094 11.5024547,15.4069846 12.9,14.31 L16.29,17.71 C16.4777666,17.8993127 16.7333625,18.0057983 17,18.0057983 C17.2666375,18.0057983 17.5222334,17.8993127 17.71,17.71 C17.8993127,17.5222334 18.0057983,17.2666375 18.0057983,17 C18.0057983,16.7333625 17.8993127,16.4777666 17.71,16.29 Z M2,8 C2,4.6862915 4.6862915,2 8,2 C11.3137085,2 14,4.6862915 14,8 C14,11.3137085 11.3137085,14 8,14 C4.6862915,14 2,11.3137085 2,8 Z"></path>
</svg><input id="mysearch-input" type="search" placeholder="搜索" autocomplete="off"><div class="mysearch-clear"></div></div><button id="mysearch-close" type="button">搜索</button></div><div class="mysearch-result"><div id="mysearch-menu"></div><div id="mysearch-content"></div></div></div></div></body>
</html>
